{{>navbar}}
<h2 class="m-3">list</h2>
<table class="table table-striped table-bordered container mx-auto m-5">
    <thead>
    <tr>
        <th>l.p.</th>
        <th>ID</th>
        <th><label for="insurance-checkbox">Insurance</label></th>
        <th><label for="gas-checkbox">Gas</label></th>
        <th><label for="fourbyfour-checkbox">4x4</label></th>
        {{#if edit}}
            <th>Edit record</th>
        {{else}}
            <th>Delete record</th>
        {{/if}}
    </tr>
    </thead>
    <tbody>
    {{#each records}}
        <tr class="fw-bold">
            <td class="text-info">{{@index}}</td>
            <td class="text-info">{{_id}}</td>
            {{#if editThisRecord }}
                {{> car-edit-table-row insurance=insurance gas=gas fourbyfour=fourbyfour}}
            {{else}}
                <form action="/handleCarEditList" method="POST">
                {{> car-table-row insurance=insurance gas=gas fourbyfour=fourbyfour}}
            {{/if}}

            <!-- Delete or edit button -->
            <td class="col-sm-2">
                {{#if editThisRecord}}
                    <!-- Do nothing in this case, as this form is generated in car-edit-table-row partial -->
                <!-- ../ references a variable from parent context - edit is not a part of each loop -->
                {{else if ../edit}}
                        <input type="hidden" name="id" value="{{_id}}">
                        <button type="submit" class="btn btn-warning container-fluid">Edit</button>
                    </form>
                {{else}}
                    <form action="/handleDeleteCar" method="POST">
                        <input type="hidden" name="id" value="{{_id}}">
                        <button type="submit" class="btn btn-danger container-fluid">Delete</button>
                    </form>
                {{/if}}
            </td>
        </tr>
    {{/each}}
    </tbody>
</table>
